@model System.String
@{
    ViewBag.Title = ViewBag.ActionText + " sản phẩm";
    Layout = "~/Views/Shared/_Ajax.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {

        var textContainer = "#Text_@ViewBag.Container";
        var hiddenContainer = "#Value_@ViewBag.Container";
        if(!@ViewBag.SelectMutil.ToString().ToLower())
        {
            $("#SelectTreeCategory input[type=checkbox]").click(function(){
                var lastCheck = $(this).is(':checked');
                $("#SelectTreeCategory input[type=checkbox]").attr('checked', false);
                $(this).attr('checked', lastCheck);
            });
        }

        $("#SelectTreeCategory").treeview({
            collapsed: true,
            animated: "medium",
            control: "#SelectTreeControl",
            persist: "location"
        });


        $("#CategoryTreeSelectForm").validate({
            rules: {
                FAQTitle:
                {
                    required: true,
                    minlength: 2,
                    maxlength: 100
                },
                FAQDescription:
                {
                    minlength: 15,
                    maxlength: 2000
                }
            },
            submitHandler: function () { //onSubmit
                var values = '';
                var text = '';
                $("#SelectTreeCategory input[type=checkbox]:checked").each(function(){
                    values += "," + $(this).val();
                    text += "<li>" + $(this).attr("title") + "</li>";
                });

                if(values != '') {
                    text = "<ul class=\"listValues\">" + text + "</ul>";
                    $(textContainer).html(text);
                    $(hiddenContainer).val(values.substring(1));
                    $("#dialog-form-2").dialog('close');
                }
                else
                {
                    createMessage("Thông báo", "Chưa có chuyên mục nào được chọn"); // Tạo thông báo lỗi
                }
                return false;
            }
        });

        $("#TreeSelectclose").click(function () {
            $("#dialog-form-2").html("").dialog('close');
        });
    });
</script>

<form id="CategoryTreeSelectForm">
    <fieldset class="forms">
        <table class="tableforms" cellspacing="1" width="100%">
            <tr>
                <td>
                    <div id="SelectTreeControl" class="treeTool">
		                <a title="Đóng tất cả các nhánh" href="#" class="collapse">Đóng tất cả</a>
		                <a title="Mở tất cả các nhánh" href="#" class="expand">Mở tất cả</a>
	                </div>
                    <ul id="SelectTreeCategory" class="filetree" style="border:0px;">
                        @Html.Raw(Model)
                    </ul>
                </td>
            </tr>
            <tr>
                <td class="submit">
                    <button id="TreeSelectsubmit" type="submit" class="primaryAction">Chọn</button>
                    <button id="TreeSelectreset" type="reset" class="primaryAction">Chọn lại</button>
                    <button id="TreeSelectclose" type="button" class="primaryAction">Đóng lại</button>
                </td>
            </tr>
        </table>
    </fieldset>
</form>